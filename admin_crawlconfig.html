<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Administrator | Open Docs</title>

    <!-- Contrast Favicon -->
    <link rel="icon" href="assets/images/favicon.ico">
    
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!-- Bootstrap theme -->
    <link href="assets/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

    <!-- Custom styles for this template -->
    <link href="assets/css/main.css" rel="stylesheet">

    <!-- Lightbox -->
    <link href="assets/css/lightbox/lightbox.css" rel="stylesheet">

    <!-- Google Font: Lato -->
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">


    <!-- ZenDesk Support Widget -->
    <!-- Start of contrastsecurity Zendesk Widget script -->
    <script>/*<![CDATA[*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","contrastsecurity.zendesk.com");/*]]>*/</script>

<!-- End of contrastsecurity Zendesk Widget script -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    
  <div id="wrapper">

      


<!-- Fixed navbar -->

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">

      <div class="navbar-brand">
          <a href="index.html"><img src="../../assets/images/OpenDocs_logo.png" width="142" height="37" data-toggle="tooltip" data-placement="top" title="Back to OpenDocs Home"></a>
      </div>

  
      <div class="navbar-collapse collapse">
        
          <ul class="nav navbar-nav">
            <li>
              <a href="dev_api3.html">Developer</a>
            </li>
            <li>
              <a href="admin_tsinstall.html">Administrator</a>
            </li>
            <li>
              <a href="user.html">User</a>
            </li>
            <li>
              <a href="release_v3.html">Release Notes</a>
            </li>
            <li>
              <a href="contribute_guidelines.html">Contribute</a>
            </li>
          </ul>
        

        
          <ul class="nav navbar-nav navbar-right">
            <a href="https://github.com/Contrast-Security-OSS/docs" target="new"><i class="fa fa-github fa-2x" data-toggle="tooltip" data-placement="top" title="View the OpenDocs repo on GitHub"></i></a>
          </ul>
      

      </div><!--/.nav-collapse -->
  
</div>






<div id="nav">  

    <div class="persona">
        <img src="../../assets/images/Admin.png" width="75" height="75">
            <p class="label2">Admin</p>
    </div>

    <div class="scroll">
        <div class="navitems">
            <ul>
                <li><p class="label5">TeamServer</p></li>
                <li><a href="admin_tsinstall.html">Installation</a></li>
                <li><a href="admin_tsconfig.html">Configuration</a></li>
                <li><a href="admin_tsfaq.html">Troubleshooting</a></li>
                <br>
                <br>
                <li><p class="label5">Crawler</p></li>
                <li><a href="admin_crawlinstall.html">Installation</a></li><li>
                </li><li>Configuration</li>

                     <li><a href="admin_crawlconfig.html#overview" class="label9">Overview</a></li>
                     <li><a href="admin_crawlconfig.html#monitor" class="label9">Monitoring</a></li>
                    <br>
<!--
                <li><a href="admin_crawlfaq.html">Troubleshooting</a></li>
-->
            </ul>
        </div>
    </div>
</div>


<div class="breadcontent">
    <div class="breadcontainer">
        <ol class="breadcrumb">
            <li>Administrator</li>
            <li>Crawler</li>
            <li class="label6">Configuration</li>
        </ol>
    </div>
</div>

<div class="container-content">
    <div class="article">
        <h1 class="label2cat">Crawler Micro-Service Overview</h1>
            <a class="anchor" id="overview">
                <div class="actions">
                    <div class="iconbar">
                        
<a href="https://twitter.com/share" class="twitter-share-button" data-via="contrastsec" data-count="none" data-hashtags="opendocs"></a>
	

<div class="iconbar">

	<a href="https://github.com/Contrast-Security-OSS/docs/issues" target="new"><i class="fa fa-bug fa-lg" data-toggle="tooltip" data-placement="top" title="Report an issue"></i></a>

  	<a href="https://github.com/Contrast-Security-OSS/docs/blob/master/content/admin/crawler/config" target="new"><i class="fa fa-pencil fa-lg" data-toggle="tooltip" data-placement="top" title="Improve this article"></i></a>

</div>



                    </div>
                </div>
                <!--
title: "Crawler Micro-Service Overview"
description: "An overview of the Crawler micro-service"
-->

<h2 id="overview">Overview</h2>
<p>Contrast has integrated a third-party crawling technology, otherwise known as <em>spidering</em>, for the purpose of exercising the automated test coverage against a Contrast-instrumented web application. This crawling technology is capable of executing automated web requests against both static and dynamic web applications with relative ease.</p>
<p>Web applications have changed significantly since many of the traditional crawlers were first made available. Unlike many traditional crawlers (commercial or open-source), the Contrast Crawler can interact with elements in the DOM in addition to static HREF attributes in the anchor elements of the markup.</p>
<h2 id="nomenclature">Nomenclature</h2>
<ul>
<li><strong>States</strong>: Unique content of the DOM</li>
<li><strong>Click Rules</strong>: Defines how to navigate and discover pages and states via mouse clicks</li>
<li><strong>Page Condition</strong>: Defines constraints on which pages to crawl</li>
<li><strong>State Filter</strong>: Defines filters on DOM contents</li>
</ul>
<h2 id="crawling-mechanism">Crawling Mechanism</h2>
<p>As JavaScript-enabled interactions can change the content of the DOM, we track <strong>states</strong> for each DOM. A single DOM can have more than one state.</p>
<p>JavaScript allows you to build in click handlers to practically any HTML element. In addition to clicks, there are other events that can change states, such as <em>mouse in/out</em>, <em>drag and drop</em>, <em>keyboard press</em>, <em>double-click</em>, <em>right-click</em>, <em>touch</em>, <em>gestures</em>, and combinations of these events. Contrast Crawler focuses on <em>click</em> and <em>input</em> events only. This is the most effective and efficient way to discover and navigate. Crawler makes its best attempt to discover all states but it&#39;s possible to have unreachable states for the crawler. An example of a difficult state to reach is one that relies on a specific search result to drill in.</p>
<p>To help Crawler succeed at discovering as many states as possible, we expose various configurations for text inputs and <strong>click rules</strong>. One example is <em>login actions</em>. You need to provide username and password information, then specify where they go. Depending on the UI implementation, you also have to configure custom click rules in order to teach what to click to submit the login form. By default, Crawler clicks on the folowing DOM elements:</p>
<pre><code>builder.crawlRules().click(&quot;a&quot;);
builder.crawlRules().click(&quot;button&quot;);
builder.crawlRules().click(&quot;input&quot;).withAttribute(&quot;type&quot;, &quot;submit&quot;);
builder.crawlRules().click(&quot;input&quot;).withAttribute(&quot;type&quot;, &quot;button&quot;);
builder.crawlRules().click(&quot;input&quot;).when(new XPathCondition(&quot;//*[contains(@onclick, &#39;(&#39;)]&quot;));
builder.crawlRules().click(&quot;div&quot;).when(new XPathCondition(&quot;//*[contains(@onclick, &#39;(&#39;)]&quot;));
builder.crawlRules().click(&quot;span&quot;).when(new XPathCondition(&quot;//*[contains(@onclick, &#39;(&#39;)]&quot;));
builder.crawlRules().click(&quot;image&quot;).when(new XPathCondition(&quot;//*[contains(@onclick, &#39;(&#39;)]&quot;));
builder.crawlRules().click(&quot;input&quot;).when(new XPathCondition(&quot;//*[contains(@ng-click, &#39;(&#39;)]&quot;));
builder.crawlRules().click(&quot;div&quot;).when(new XPathCondition(&quot;//*[contains(@ng-click, &#39;(&#39;)]&quot;));
builder.crawlRules().click(&quot;span&quot;).when(new XPathCondition(&quot;//*[contains(@ng-click, &#39;(&#39;)]&quot;));
builder.crawlRules().click(&quot;image&quot;).when(new XPathCondition(&quot;//*[contains(@ng-click, &#39;(&#39;)]&quot;));</code></pre>
<h2 id="feature-highlights">Feature Highlights</h2>
<ul>
<li>Discovers JavaScript and AJAX-based user interactions</li>
<li>Integrated into the TeamServer <strong>Application Activity</strong> page</li>
<li>Presents visual state flow graph (navigational model) of web page connections for exploring results</li>
<li>Authentication via HTML form or HTTP basic auth</li>
<li>Scheduler</li>
</ul>
<h2 id="micro-service-architecture">Micro-Service Architecture</h2>
<p>To isolate the resource consumption by the crawler from the TeamServer&#39;s core platform, Contrast has built the crawler component as a micro-service. This not only allows TeamServer to operate without competing for resources, but also enables the crawler to scale. Each micro-service instance polls the next crawl from TeamServer&#39;s FIFO queue one at a time. However, you can achieve concurrency via deployment of multiple crawlers. The number of concurrency maps to the number of deployed micro-services. </p>
<blockquote>
<p><strong>Note:</strong> One (virtual) machine should only run one crawler</p>
</blockquote>
<p><a href="assets/images/KB3-g01.png" rel="lightbox" title="Micro Service Architecture"><img class="thumbnail" src="assets/images/KB3-g01.png"></a></p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="admin_crawlinstall.html#install">Crawler Installation And Deployment Guide</a></li>
<li><a href="user_tsguidecrawl.html#how">How To Crawl A Web Application</a></li>
<li><a href="admin_crawlconfig.html#monitor">Monitoring A Crawler Instance</a></li>
</ul>

            </a>
    </div>
</div>

<div class="container-content">
    <div class="article">
        <h1 class="label2cat">Monitoring A Crawler Instance</h1>
            <a class="anchor" id="monitor">
                <div class="actions">
                    <div class="iconbar">
                        
<a href="https://twitter.com/share" class="twitter-share-button" data-via="contrastsec" data-count="none" data-hashtags="opendocs"></a>
	

<div class="iconbar">

	<a href="https://github.com/Contrast-Security-OSS/docs/issues" target="new"><i class="fa fa-bug fa-lg" data-toggle="tooltip" data-placement="top" title="Report an issue"></i></a>

  	<a href="https://github.com/Contrast-Security-OSS/docs/blob/master/content/admin/crawler/config" target="new"><i class="fa fa-pencil fa-lg" data-toggle="tooltip" data-placement="top" title="Improve this article"></i></a>

</div>



                    </div>
                </div>
                <!--
title: "Monitoring A Crawler Instance"
description: "Instructions on how to monitor a crawling instance"
-->

<h2 id="production-monitoring">Production Monitoring</h2>
<h3 id="micro-service">Micro-Service</h3>
<p>The crawler micro-service provides features to help you monitor and manage the application in production via HTTP endpoints and JMX.</p>
<pre><code>curl http://localhost:8091/actuator/health
{&quot;status&quot;:&quot;UP&quot;,&quot;diskSpace&quot;:{&quot;status&quot;:&quot;UP&quot;,&quot;free&quot;:40122884096,&quot;threshold&quot;:10485760}}
curl http://localhost:8091/actuator/info

{&quot;app&quot;:{&quot;version&quot;:&quot;3.1.7&quot;,&quot;description&quot;:&quot;Contrast Crawler is a Web crawler that automatically crawls static and dynamic Web applications to exercise Contrast agents&quot;,&quot;name&quot;:&quot;Contrast Crawler&quot;},&quot;build&quot;:{&quot;artifact&quot;:&quot;contrast-crawler-service&quot;,&quot;name&quot;:&quot;Contrast Crawler Service&quot;,&quot;version&quot;:&quot;3.1.7&quot;,&quot;description&quot;:&quot;Micro-service for Contrast&#39;s spider tool&quot;}}</code></pre>
<h3 id="additional-features-exposed-in-jmx">Additional Features Exposed in JMX</h3>
<table>
<thead>
<tr>
<th>ID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>autoconfig</code></td>
<td>Displays an auto-configuration report showing all auto-configuration candidates and the reason why they <strong>were</strong> or <strong>were not</strong> applied</td>
</tr>
<tr>
<td><code>beans</code></td>
<td>Displays a complete list of all the Spring beans in your application</td>
</tr>
<tr>
<td><code>configprops</code></td>
<td>Displays a collated list of all <code>@ConfigurationProperties</code></td>
</tr>
<tr>
<td><code>dump</code></td>
<td>Performs a thread dump</td>
</tr>
<tr>
<td><code>env</code></td>
<td>Exposes properties from Spring&#39;s <code>ConfigurableEnvironment</code></td>
</tr>
<tr>
<td><code>metrics</code></td>
<td>Shows <strong>metrics</strong> information for the current application</td>
</tr>
<tr>
<td><code>mappings</code></td>
<td>Displays a collated list of all <code>@RequestMapping</code> paths</td>
</tr>
<tr>
<td><code>shutdown</code></td>
<td>Allows the application to be gracefully shut down (not enabled by default)</td>
</tr>
<tr>
<td><code>trace</code></td>
<td>Displays trace information (by default the last few HTTP requests)</td>
</tr>
</tbody>
</table>
<h2 id="teamserver">TeamServer</h2>
<h3 id="disk-management">Disk Management</h3>
<p>Crawl records are persisted as history on the TeamServer machine. Over time, the accumulation of the result records can significantly impact the disk usage. By default, TeamServer limits the disk space usage by crawl history to <strong>1 GB</strong>. Upon reaching this limit, the oldest crawl history will be deleted and the new crawler results will be saved. These settings can be changed within <code>crawler.properties</code> in the <strong><em>${contrast.home.dir}/data/conf</em></strong> directory.</p>

            </a>
    </div>
</div>


  
      

<div id="footer">
    Copyright &copy 2013-2015  <a href="https://www.contrastsecurity.com" target="new"> <img src="../../assets/images/Contrast-logo-transparent.png" width="80" height="26" data-toggle="tooltip" data-placement="top" title="Check out our website"></a>  Licensed under <a href="https://www.creativecommons.org/licenses/by-nc-sa/4.0/" target="new"> <span style="color: #56b4aa">Creative Commons (CC BY-NC-SA 4.0)</span></a>
</div>

      
  </div>
  

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/twitterbutton.js"></script>
    <script src="assets/js/externallink.js"></script>
    <!--Lightbox -->
    <script src="assets/css/lightbox/lightbox.js"></script>
    <!--
    <script src="assets/css/lightbox/lightbox-plus-jquery.js"></script>
    -->


  </body>
</html>
